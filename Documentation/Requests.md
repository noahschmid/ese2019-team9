# Requests

## User Requests

 |  Type  |   Path  | Header |       Body       | Return | Description
 |:------:|---------|--------|------------------|--------|------------|
 | patch  | /verify | `none` | {token: `token`} | Returns <ul><li>*200 Ok* `{message: 'Email successfully verified'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Tries to verify a users email with the token being the given token via email
| post  | /signup | `none` | {email: `userEmail`, password: `userPassword`} | Returns <ul><li>*201 Ok* `{message: 'User created and verification email sent', createdUser}`</li><li>*409 Conflict* `{message: 'User with same email already exists', createdUser}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Creates a new user and sends verification email
| post  | /login | `none` | {email: `userEmail`, password: `userPassword`} | Returns <ul><li>*200 Ok* `{ message: 'Authentication successful', token, id: user._id}`</li><li>*401 Unauthorized* `{message: 'Authentication failed'}`</li><li>*406 Not Acceptable* `{ message: 'Authentication failed'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Log the user in and return the user if the credentials were correct
| post  | /resend | `none` | {email: `userEmail`, id: `userId`} | Returns <ul><li>*200 Ok* `{message: 'Verification successfully resent'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Resends the email verification link
| post  | /forgot | `none` | {email: `userEmail`} | Returns <ul><li>*200 Ok* `{message:'reset link sent'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Sends a link with a token to reset the password if the email exists, else sends email notification that someone tried to reset the password on the email that isn't registered with a link to the homepage
| patch  | /reset | `none` | {token: `token`, password: `password`} | Returns <ul><li>*200 Ok* `{message: 'password-reset successful'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Updates the password of a user if the token is valid and the user is found
| get  | /`<userId>` | {token: `token`} | {} | Returns <ul><li>*200 Ok* `{_id: userId, admin: userAdminFlag, email: userEmail, verifiedEmail: userVerifiedEmailFlag, name: userName, address: userAddress, country: userCountry, website: userWebsite, phone: userPhonenumber, sex: userSex, image: imagePath, productsSold: numberofProductsSold}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Returns the detail information of the user that was requested via the users id
| get  | /`<userId>` | {token: `token`} | {} | Returns <ul><li>*200 Ok* `{_id: userId, admin*: userAdminFlag, email*: userEmail, verifiedEmail*: userVerifiedEmailFlag, name: userName, address: userAddress, country: userCountry, website: userWebsite, phone: userPhonenumber, sex: userSex, image: imagePath, productsSold: numberofProductsSold}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Returns the detail information of the user that was requested via the users id.  **These fields are only returned if the user has made the request for the own userdata or is an admin*
| get  | / | {token: `token`} | {} | Returns <ul><li>*200 Ok* `{_id: userId, admin: userAdminFlag, email: userEmail, verifiedEmail: userVerifiedEmailFlag, name: userName, address: userAddress, country: userCountry, website: userWebsite, phone: userPhonenumber, sex: userSex, image: imagePath, productsSold: numberofProductsSold}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Returns the detail information of all users. The requesting user has to be an admin
| patch  | /`<userId>` | {token: `token`} | {userId: `userId`, field1: `field1Value`... } | Returns <ul><li>*200 Ok* `{message: 'successfully updated'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Patches the given fields of the user. `Admin` only accepts `true` or `false`, `Sex` only accepts `'male'` or `'female`
| delete  | /`<userId>` | {token: `token`} | {} | Returns <ul><li>*200 Ok* `{message: 'User deleted'}`</li><li>*500 Internal Server Error* `{message: errorMessage}`</li></ul> | Deletes the user if the requesting user is the user itself or an admin