{"version":3,"sources":["./src/app/pages/product-details/product-details.page.html","./src/app/core/services/productService/product.service.ts","./src/app/pages/product-details/product-details.module.ts","./src/app/pages/product-details/product-details.page.scss","./src/app/pages/product-details/product-details.page.ts"],"names":[],"mappings":"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","file":"pages-product-details-product-details-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n\\t<ion-toolbar>\\n\\t\\t<app-header></app-header>\\n\\t</ion-toolbar>\\n</ion-header>\\n<ion-content>\\n\\t<ion-title *ngIf=\\\"!product\\\">\\n\\t\\t... Loading ...\\n\\t</ion-title>\\n\\t<ion-grid *ngIf=\\\"product\\\">\\n\\t\\t<ion-row>\\n\\t\\t\\t<ion-title>{{ product.name }}</ion-title>\\n\\t\\t</ion-row>\\n\\t\\t<ion-row>\\n\\t\\t\\t<ion-col class=\\\"product-image-container\\\" size=\\\"12\\\" size-md=\\\"6\\\">\\n\\t\\t\\t\\t<ion-thumbnail class=\\\"product-image\\\"><ion-img [src]=\\\"product.src || 'https://lorempixel.com/300/300/cats/'\\\"></ion-img></ion-thumbnail>\\n\\t\\t\\t</ion-col>\\n\\t\\t\\t<ion-col size=\\\"12\\\" size-md=\\\"6\\\">\\n\\t\\t\\t\\t<ion-list lines=\\\"none\\\">\\n\\t\\t\\t\\t\\t<ion-item class=\\\"ion-text-capitalize product-title\\\">{{ product.name }}</ion-item>\\n\\t\\t\\t\\t\\t<ion-item>Price: <span slot=\\\"end\\\">{{ product.price || 'not specified'}}</span></ion-item>\\n\\t\\t\\t\\t\\t<ion-item>Verified: <span slot=\\\"end\\\">{{ product.verified }}</span></ion-item>\\n\\t\\t\\t\\t\\t<ion-item>Category: <span slot=\\\"end\\\">{{ product.category }}</span></ion-item>\\n\\t\\t\\t\\t\\t<ion-item>Seller: <span slot=\\\"end\\\">{{ product.seller.name }}</span></ion-item>\\n\\t\\t\\t\\t\\t<ion-item>Location: <span slot=\\\"end\\\">{{ product.location || 'nowhere'}}</span></ion-item>\\n\\t\\t\\t\\t\\t<ion-button [href]=\\\"createMailLink()\\\">Contact</ion-button>\\n\\t\\t\\t\\t</ion-list>\\n\\t\\t\\t</ion-col>\\n\\t\\t</ion-row>\\n\\t\\t<ion-row>\\n\\t\\t\\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t<span class=\\\"product-title\\\">Description</span><br/>\\n\\t\\t\\t</ion-col>\\n\\t\\t</ion-row>\\n\\t\\t<ion-row>\\n\\t\\t\\t<ion-col size=\\\"12\\\">\\n\\t\\t\\t\\t<ng-container *ngIf=\\\"product.description\\\"> {{ product.description }} </ng-container>\\n\\t\\t\\t\\t<ng-container *ngIf=\\\"!product.description\\\"> {{ loremIpsum }} </ng-container>\\n\\t\\t\\t</ion-col>\\n\\t\\t</ion-row>\\n\\t</ion-grid>\\n</ion-content>\"","import { Injectable } from '@angular/core';\nimport {HttpClient, HttpHeaders} from '@angular/common/http';\nimport {map} from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { AuthService } from '../authService/auth.service';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ProductService {\n\n  constructor(\n      private httpClient: HttpClient,\n      private authService: AuthService\n  ) { }\n\n  productsEndpoint = 'https://moln-api.herokuapp.com/product';\n\n  getAllProducts(): Observable<[]> {\n   return this.httpClient.get<[]>(this.productsEndpoint);\n  }\n\n  getProductsById(id: string) {\n      let products = [];\n      return new Promise((resolve, reject) => {\n          this.getAllProducts().subscribe(data => {\n              // filter allProducts so only the verified products of the respective category are presented\n              // @ts-ignore\n              products = data.filter(prod => prod.category._id === id).filter(prod => prod.verified);\n              resolve(products);\n          },\n              error => {\n              reject(error);\n              });\n      });\n  }\n\n  addNewProduct(name: string, category: string, price: number) {\n    return this.httpClient.post(this.productsEndpoint + '/add', {name, category, price})\n       .pipe(map(res => {\n         return res;\n       }));\n  }\n\n  deleteProduct(productId: string) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', 'Bearer: ' + token);\n    return this.httpClient.delete(this.productsEndpoint+`/${productId}`, {headers: headers});\n  }\n\n  verifyProduct(productId: string) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', 'Bearer: ' + token);\n    return this.httpClient.patch(this.productsEndpoint+`/${productId}`, {verified: true}, {headers: headers});\n  }\n\n  /*\n  uploadImage(image: File) {\n      const uploadData = new FormData();\n      uploadData.append('image', image);\n      return this.http.post<{imageUrl: string, imagePath: string}>('https://', uploadData);\n  }\n   */\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProductDetailsPage } from './product-details.page';\nimport { HeaderModule } from 'src/app/core/header.module';\n\nconst routes: Routes = [\n  {  path: '',  component: ProductDetailsPage },\n  {  path: ':productId', component: ProductDetailsPage }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HeaderModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ProductDetailsPage]\n})\nexport class ProductDetailsPageModule {}\n","module.exports = \".product-title {\\n  font-weight: bold;\\n}\\n\\n:host ion-thumbnail {\\n  --size: 300px;\\n}\\n\\n:host ion-item {\\n  --padding-bottom: 20px;\\n  --min-height: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9vbGl2aWVyc3RhZWhsaS9Eb2N1bWVudHMvVW5pQmVybi9TZW1lc3RlcjMvSW5mb3JtYXRpay9FU0UvZXNlMjAxOS10ZWFtOS9mcm9udGVuZC9zcmMvYXBwL3BhZ2VzL3Byb2R1Y3QtZGV0YWlscy9wcm9kdWN0LWRldGFpbHMucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9wcm9kdWN0LWRldGFpbHMvcHJvZHVjdC1kZXRhaWxzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0FDQ0o7O0FERUE7RUFDSSxhQUFBO0FDQ0o7O0FERUE7RUFDSSxzQkFBQTtFQUNBLGlCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9wcm9kdWN0LWRldGFpbHMvcHJvZHVjdC1kZXRhaWxzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wcm9kdWN0LXRpdGxlIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuOmhvc3QgaW9uLXRodW1ibmFpbCB7XG4gICAgLS1zaXplOiAzMDBweDtcbn1cblxuOmhvc3QgaW9uLWl0ZW0ge1xuICAgIC0tcGFkZGluZy1ib3R0b206IDIwcHg7XG4gICAgLS1taW4taGVpZ2h0OiAwcHg7XG59IiwiLnByb2R1Y3QtdGl0bGUge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuOmhvc3QgaW9uLXRodW1ibmFpbCB7XG4gIC0tc2l6ZTogMzAwcHg7XG59XG5cbjpob3N0IGlvbi1pdGVtIHtcbiAgLS1wYWRkaW5nLWJvdHRvbTogMjBweDtcbiAgLS1taW4taGVpZ2h0OiAwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\n\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { ProductService } from 'src/app/core/services/productService/product.service';\n\nimport { first } from 'rxjs/operators';\n\nimport { CategoryService } from 'src/app/core/services/categoryService/category.service';\n\n@Component({\n\tselector: 'app-product-details',\n\ttemplateUrl: './product-details.page.html',\n\tstyleUrls: ['./product-details.page.scss']\n})\nexport class ProductDetailsPage implements OnInit {\n\tprivate productId;\n\tprivate productInformation;\n\n\tprivate loremIpsum = `Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut\nlabore et dolore magna aliquyam erat, sed diam voluptua.At vero eos et accusam et justo duo dolores et ea rebum.Stet\n\tclita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.Lorem ipsum dolor sit amet, consetetur\n\tsadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.At\n\tvero eos et accusam et justo duo dolores et ea rebum.Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum\n\tdolor sit amet.`;\n\n\tconstructor(\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate productService: ProductService,\n\t\tprivate categoryService: CategoryService\n\t) { }\n\n\tget product() {\n\t\treturn this.productInformation;\n\t}\n\n\tngOnInit() {\n\t\tthis.route.paramMap.subscribe(params => {\n\t\t\tif (params.get('productId') === null) {\n\t\t\t\tthis.router.navigate(['/subcategory']);\n\t\t\t} else {\n\t\t\t\tthis.productId = params.get('productId');\n\t\t\t\tthis.displayProductInformation(this.productId);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisplayProductInformation(productId: any) {\n\t\tthis.getProductFromBackend(productId).then(\n\t\t\tdata => {\n\t\t\t\tthis.productInformation = data;\n\t\t\t},\n\n\t\t\terr => {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t);\n\t}\n\n\tgetProductFromBackend(productId) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.productService\n\t\t\t\t.getAllProducts()\n\t\t\t\t.pipe(first())\n\t\t\t\t.subscribe(\n\t\t\t\t\tdata => {\n\t\t\t\t\t\tconst result = data.filter(\n\t\t\t\t\t\t\tproduct => (product as any)._id === productId\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (result.length === 1) {\n\t\t\t\t\t\t\tresolve(result[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject('No such product found');\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\n\t\t\t\t\terr => {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcreateMailLink() {\n\t\treturn `mailto:${this.productInformation.mail || 'mail@adresse.ch'}?subject=Request%20for%20product%20${this.productInformation.name}`;\n\t}\n}\n"],"sourceRoot":""}