{"version":3,"sources":["./src/app/pages/payment/payment.page.html","./src/app/pages/payment/payment.module.ts","./src/app/pages/payment/payment.page.scss","./src/app/pages/payment/payment.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,m1B;;;;;;;;;;;;;;;;;;;;;;;;ACAyC;AACM;AACF;AACU;AAEV;AACS;AACE;AACX;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,yDAAW;KACvB;CACF,CAAC;AAaF,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;CAAG;AAApB,iBAAiB;IAX7B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,gEAAY;YACZ,kEAAY;YACZ,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,yDAAW,CAAC;KAC5B,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;AC5B9B,+DAA+D,mJ;;;;;;;;;;;;;;;;;;;;ACGxC;AAiBE;AAID;AAIoC;AAO5D,IAAa,WAAW,GAAxB,MAAa,WAAW;IAEtB,YAAoB,KAAqB,EAAU,aAA4B,EAAU,cAA8B;QAAnG,UAAK,GAAL,KAAK,CAAgB;QAAU,kBAAa,GAAb,aAAa,CAAe;QAAU,mBAAc,GAAd,cAAc,CAAgB;IAAK,CAAC;IAO7H,QAAQ;QACN,IAAI,CAAC,MAAM,GAAC,MAAM,CAAC;QAEnB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;YACrC,IAAI,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,IAAI,EAAE;gBAChC,IAAI,CAAC,MAAM,GAAC,OAAO;aACpB;iBAAM;gBACL,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;gBACjC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE;oBACxC,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;wBACnD,IAAI,CAAC,MAAM,GAAC,OAAO;wBACnB,OAAO;qBACR;oBAED,IAAI,CAAC,cAAc,CAAC,cAAc,CAC9B,MAAM,CAAC,SAAS,EAChB,MAAM,CAAC,OAAO,EACd,IAAI,CAAC,KAAK,CAAC;yBACZ,SAAS,CAAC,GAAG,CAAC,EAAE;wBACf,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;wBACjB,IAAI,GAAW,CAAC,OAAO,EAAE;4BACvB,IAAI,CAAC,OAAO,GAAI,GAAW,CAAC,OAAO,CAAC;4BACpC,YAAY,CAAC,OAAO,CAAC,OAAO,EAAG,GAAW,CAAC,UAAU,CAAC,CAAC;4BACvD,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC;yBAClB;6BAAM;4BACL,IAAI,CAAC,MAAM,GAAC,MAAM,CAAC;yBACpB;oBAEH,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACL,CAAC;CAEF;;YAzC4B,8DAAc;YAAyB,4DAAa;YAA0B,4FAAc;;AAF5G,WAAW;IALvB,+DAAS,CAAC;QACT,QAAQ,EAAE,aAAa;QACvB,mJAAkC;;KAEnC,CAAC;2EAG2B,8DAAc,EAAyB,4DAAa,EAA0B,4FAAc;GAF5G,WAAW,CA2CvB;AA3CuB","file":"pages-payment-payment-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar>\\n      <app-header></app-header>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content>\\n  <ion-row style=\\\"margin-top:5%\\\">\\n    <ion-col offset-md=\\\"3\\\" size=\\\"12\\\" size-md=\\\"6\\\" *ngIf=\\\"status == 'wait'\\\">\\n        Your payment is being processed... Please wait\\n    </ion-col>\\n\\n    <ion-col offset-md=\\\"3\\\" size=\\\"12\\\" size-md=\\\"6\\\" *ngIf=\\\"status == 'error'\\\">\\n        Payment error\\n    </ion-col>\\n\\n    <ion-col offset-md=\\\"3\\\" size=\\\"12\\\" size-md=\\\"6\\\" *ngIf=\\\"status == 'fail'\\\">\\n        Your payment failed\\n    </ion-col>\\n\\n    <ion-col offset-md=\\\"3\\\" size=\\\"12\\\" size-md=\\\"6\\\" *ngIf=\\\"status == 'ok'\\\">\\n        Your payment was successful! \\n        <ion-button [routerLink]=\\\"['/order-details', orderId]\\\">Back to order</ion-button>\\n    </ion-col>\\n  </ion-row>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport {HeaderModule} from '../../core/header.module';\nimport {SharedModule} from '../../shared/shared.module';\nimport { PaymentPage } from './payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaymentPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    HeaderModule,\n    SharedModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [PaymentPage]\n})\nexport class PaymentPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3BheW1lbnQvcGF5bWVudC5wYWdlLnNjc3MifQ== */\"","import {\n  Component,\n  OnInit\n} from '@angular/core';\n\nimport {\n  AuthService\n} from 'src/app/core/services/authService/auth.service';\n\nimport {\n  OrderService\n} from '../../core/services/orderService/order.service';\n\nimport {\n  ProductService\n} from '../../core/services/productService/product.service';\n\nimport {\n  ActivatedRoute,\n  Router\n} from '@angular/router';\n\nimport {\n  NavController\n} from '@ionic/angular';\n\nimport {\n  PaymentService\n} from '../../core/services/paymentService/payment.service';\n\n@Component({\n  selector: 'app-payment',\n  templateUrl: './payment.page.html',\n  styleUrls: ['./payment.page.scss'],\n})\nexport class PaymentPage implements OnInit {\n\n  constructor(private route: ActivatedRoute, private navController: NavController, private paymentService: PaymentService, ) {}\n\n  token;\n  status;\n  orderId;\n\n\n  ngOnInit() {\n    this.status='wait';\n\n    this.route.paramMap.subscribe(params => {\n      if (params.get('token') === null) {\n        this.status='error'\n      } else {\n        this.token = params.get('token');\n        this.route.queryParams.subscribe(params => {\n          if (!params || !params.paymentId || !params.PayerID) {\n            this.status='error'\n            return;\n          }\n\n          this.paymentService.executePayment(\n              params.paymentId,\n              params.PayerID,\n              this.token)\n            .subscribe(res => {\n              console.log(res);\n              if((res as any).orderId) {\n                this.orderId = (res as any).orderId;\n                localStorage.setItem('token', (res as any).loginToken);\n                this.status='ok';\n              } else {\n                this.status='fail';\n              }\n\n            });\n        });\n      }\n    });\n  }\n\n}"],"sourceRoot":""}